<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal do Cadete</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-container">
        <div id="login-panel" class="auth-panel">
            <h2 class="panel-title">Login - Portal do Cadete</h2>
            <form id="login-form">
                <label for="login-numerica">Sua Num√©rica:</label>
                <input type="number" id="login-numerica" placeholder="Digite sua num√©rica..." required>
                <label for="login-password">Sua Senha:</label>
                <input type="password" id="login-password" placeholder="Digite sua senha..." required>
                <button type="submit">Entrar</button>
                <p id="login-error" class="error-message"></p>
            </form>
            <p class="auth-switcher">N√£o tem uma conta? <button id="switch-to-signup">Crie uma</button></p>
        </div>
        <div id="signup-panel" class="auth-panel hidden">
            <h2 class="panel-title">Criar Conta</h2>
            <form id="signup-form">
                <label for="signup-guerra">Nome de Guerra:</label>
                <input type="text" id="signup-guerra" required>
                <label for="signup-numerica">Num√©rica:</label>
                <input type="number" id="signup-numerica" required>
                <label for="signup-pelotao">Pelot√£o (somente o n√∫mero):</label>
                <input type="text" id="signup-pelotao" required>
                <label for="signup-password">Crie uma Senha (m√≠n. 6 caracteres):</label>
                <input type="password" id="signup-password" required>
                <button type="submit">Criar Conta</button>
                <p id="signup-error" class="error-message"></p>
            </form>
            <p class="auth-switcher">J√° tem uma conta? <button id="switch-to-login">Fa√ßa Login</button></p>
        </div>
    </div>

    <div id="profile-card-modal" class="modal hidden">
        <div id="profile-card-content" class="panel">
            <h2 id="profile-card-name" class="panel-title"></h2>
            <div id="profile-card-details">
                <img id="profile-card-pic" src="https://i.imgur.com/K3wY2mn.png" alt="Avatar">
                <p><strong>N√≠vel:</strong> <span id="profile-card-level"></span></p>
                <p><strong>M√©dia:</strong> <span id="profile-card-average"></span></p>
                <p><strong>Pelot√£o:</strong> <span id="profile-card-pelotao"></span></p>
                <p><strong>Instagram:</strong> <span id="profile-card-instagram"></span></p>
            </div>
            <div class="profile-card-actions">
                <button id="profile-card-like-button">üëç Elogiar</button>
            </div>
            <button id="profile-card-close-button">Fechar</button>
        </div>
    </div>
    
    <div id="game-container" class="hidden">
        <div id="left-column">
            <div id="profile-panel" class="panel">
                <div id="profile-pic-container">
                    <img id="profile-pic" src="https://i.imgur.com/K3wY2mn.png" alt="Foto do Perfil">
                    <input type="file" id="upload-pic-input" accept="image/*" class="hidden">
                    <button id="upload-pic-button" title="Trocar Foto de Perfil">üì∑</button>
                </div>
                <div id="player-info">
                    <div id="player-name">Aluno Oficial</div>
                    <div id="level">N√çVEL 1</div>
                    <div><strong>T√≠tulo:</strong> <span id="player-title"></span></div>
                </div>
                <div class="progress-bar-container"><div id="exp-bar"></div></div>
                <div id="exp-text">EXP: 0 / 100</div>
                <div class="profile-actions">
                    <button class="tab-button" data-tab="tab-settings">‚öôÔ∏è Configura√ß√µes</button>
                    <button id="logout-button">Sair</button>
                </div>
            </div>
        </div>
        <div id="main-column">
            <div id="tabs-panel" class="panel">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="tab-main">Principal</button>
                    <button class="tab-button" data-tab="tab-mural">Mural</button>
                    <button class="tab-button" data-tab="tab-ranking">Ranking</button>
                    <button class="tab-button" data-tab="tab-events">Eventos</button>
                    <button class="tab-button" data-tab="tab-settings">Configura√ß√µes</button>
                </div>
                <div class="tab-content">
                    <div id="tab-main" class="tab active">
                        <div id="global-announcements-container"></div>
                        <div class="forecast-category">
                            <h4>Miss√µes Di√°rias</h4>
                            <ul id="daily-quests-list"></ul>
                        </div>
                    </div>
                    <div id="tab-mural" class="tab">
                        <h3>Mural de Mensagens</h3>
                        <div id="mural-feed"></div>
                        <form id="mural-post-form">
                            <textarea id="mural-input" placeholder="Digite sua mensagem (limite de 280 caracteres)..." maxlength="280" required></textarea>
                            <button type="submit">Postar</button>
                        </form>
                    </div>
                    <div id="tab-ranking" class="tab">
                        <h3>Ranking de Combatentes</h3>
                        <div id="ranking-list">Carregando ranking...</div>
                    </div>
                    <div id="tab-events" class="tab">
                        <h3>Eventos e Servi√ßos</h3>
                        <div id="calendar"></div>
                    </div>
                     <div id="tab-settings" class="tab">
                        <h3>Configura√ß√µes do Perfil</h3>
                        <div class="settings-section">
                            <h4>Atualizar Perfil</h4>
                            <label for="instagram-input">Instagram (ex: @usuario):</label>
                            <input type="text" id="instagram-input" placeholder="Seu @ no Instagram">
                            <button id="save-profile-button">Salvar Perfil</button>
                        </div>
                        <div class="settings-section">
                            <h4>Alterar Senha</h4>
                            <label for="new-password-input">Nova Senha (m√≠n. 6 caracteres):</label>
                            <input type="password" id="new-password-input">
                            <button id="update-password-button">Atualizar Senha</button>
                        </div>
                        <div class="settings-section">
                            <h4>Elogios Recebidos</h4>
                            <div id="elogios-list">Carregando...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification-toast" class="hidden"></div>
    
    <script src="script.js"></script>
</body>
</html>
